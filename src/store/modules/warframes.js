const state = {
  warframes: {
    ash: {
      name: "Ash",
      role: "Warframe",
      selected: false,
      key: "ash",
      has_prime: true,
    },
    atlas: {
      name: "Atlas",
      role: "Warframe",
      selected: false,
      key: "atlas",
      has_prime: true,
    },
    banshee: {
      name: "Banshee",
      role: "Warframe",
      selected: false,
      key: "banshee",
      has_prime: true,
    },
    baruuk: {
      name: "Baruuk",
      role: "Warframe",
      selected: false,
      key: "baruuk",
      has_prime: false,
    },
    chroma: {
      name: "Chroma",
      role: "Warframe",
      selected: false,
      key: "chroma",
      has_prime: true,
    },
    ember: {
      name: "Ember",
      role: "Warframe",
      selected: false,
      key: "ember",
      has_prime: true,
    },
    equinox: {
      name: "Equinox",
      role: "Warframe",
      selected: false,
      key: "equinox",
      has_prime: true,
    },
    excalibur: {
      name: "Excalibur",
      role: "Warframe",
      selected: false,
      key: "excalibur",
      has_prime: true,
    },
    frost: {
      name: "Frost",
      role: "Warframe",
      selected: false,
      key: "frost",
      has_prime: true,
    },
    gara: {
      name: "Gara",
      role: "Warframe",
      selected: false,
      key: "gara",
      has_prime: false,
    },
    garuda: {
      name: "Garuda",
      role: "Warframe",
      selected: false,
      key: "garuda",
      has_prime: false,
    },
    gauss: {
      name: "Gauss",
      role: "Warframe",
      selected: false,
      key: "gauss",
      has_prime: false,
    },
    grendel: {
      name: "Grendel",
      role: "Warframe",
      selected: false,
      key: "grendel",
      has_prime: false,
    },
    harrow: {
      name: "Harrow",
      role: "Warframe",
      selected: false,
      key: "harrow",
      has_prime: false,
    },
    hildryn: {
      name: "Hildryn",
      role: "Warframe",
      selected: false,
      key: "hildryn",
      has_prime: false,
    },
    hydroid: {
      name: "Hydroid",
      role: "Warframe",
      selected: false,
      key: "hydroid",
      has_prime: true,
    },
    inaros: {
      name: "Inaros",
      role: "Warframe",
      selected: false,
      key: "inaros",
      has_prime: true,
    },
    ivara: {
      name: "Ivara",
      role: "Warframe",
      selected: false,
      key: "ivara",
      has_prime: true,
    },
    khora: {
      name: "Khora",
      role: "Warframe",
      selected: false,
      key: "khora",
      has_prime: false,
    },
    limbo: {
      name: "Limbo",
      role: "Warframe",
      selected: false,
      key: "limbo",
      has_prime: true,
    },
    loki: {
      name: "Loki",
      role: "Warframe",
      selected: false,
      key: "loki",
      has_prime: true,
    },
    mag: {
      name: "Mag",
      role: "Warframe",
      selected: false,
      key: "mag",
      has_prime: true,
    },
    mesa: {
      name: "Mesa",
      role: "Warframe",
      selected: false,
      key: "mesa",
      has_prime: true,
    },
    mirage: {
      name: "Mirage",
      role: "Warframe",
      selected: false,
      key: "mirage",
      has_prime: true,
    },
    nekros: {
      name: "Nekros",
      role: "Warframe",
      selected: false,
      key: "nekros",
      has_prime: true,
    },
    nezha: {
      name: "Nezha",
      role: "Warframe",
      selected: false,
      key: "nezha",
      has_prime: false,
    },
    nova: {
      name: "Nova",
      role: "Warframe",
      selected: false,
      key: "nova",
      has_prime: true,
    },
    nyx: {
      name: "Nyx",
      role: "Warframe",
      selected: false,
      key: "nyx",
      has_prime: true,
    },
    oberon: {
      name: "Oberon",
      role: "Warframe",
      selected: false,
      key: "oberon",
      has_prime: true,
    },
    octavia: {
      name: "Octavia",
      role: "Warframe",
      selected: false,
      key: "octavia",
      has_prime: false,
    },
    protea: {
      name: "Protea",
      role: "Warframe",
      selected: false,
      key: "protea",
      has_prime: false,
    },
    revenant: {
      name: "Revenant",
      role: "Warframe",
      selected: false,
      key: "revenant",
      has_prime: false,
    },
    rhino: {
      name: "Rhino",
      role: "Warframe",
      selected: false,
      key: "rhino",
      has_prime: true,
    },
    saryn: {
      name: "Saryn",
      role: "Warframe",
      selected: false,
      key: "saryn",
      has_prime: true,
    },
    titania: {
      name: "Titania",
      role: "Warframe",
      selected: false,
      key: "titania",
      has_prime: true,
    },
    trinity: {
      name: "Trinity",
      role: "Warframe",
      selected: false,
      key: "trinity",
      has_prime: true,
    },
    valkyr: {
      name: "Valkyr",
      role: "Warframe",
      selected: false,
      key: "valkyr",
      has_prime: true,
    },
    vauban: {
      name: "Vauban",
      role: "Warframe",
      selected: false,
      key: "vauban",
      has_prime: true,
    },
    volt: {
      name: "Volt",
      role: "Warframe",
      selected: false,
      key: "volt",
      has_prime: true,
    },
    wisp: {
      name: "Wisp",
      role: "Warframe",
      selected: false,
      key: "wisp",
      has_prime: false,
    },
    wukong: {
      name: "Wukong",
      role: "Warframe",
      selected: false,
      key: "wukong",
      has_prime: true,
    },
    zephyr: {
      name: "Zephyr",
      role: "Warframe",
      selected: false,
      key: "zephyr",
      has_prime: true,
    },
  },
};

function warframe_comparator_by_key(warframe1, warframe2) {
  return warframe1.name.localeCompare(warframe2.name);
}

const getters = {
  getWarframes: (state) => {
    return Object.keys(state.warframes)
      .map((key) => state.warframes[key])
      .sort(warframe_comparator_by_key);
  },
  getByRole: (state, getters) => (role) => {
    return getters.getWarframes.filter((frame) => frame.role == role);
  },
  getBySelectedByRole: (state, getters) => (role) => {
    return getters.getWarframes.filter(
      (frame) => frame.role == role && frame.selected
    );
  },
  getSelected: (state, getters) => {
    return getters.getBySelectedStatus(true);
  },
  getBySelectedStatus: (state) => (selected) => {
    return Object.keys(state.warframes)
      .map((key) => state.warframes[key])
      .filter((frame) => frame.selected == selected)
      .sort(warframe_comparator_by_key);
  },
};

// actions
const actions = {
  setWarframeSelectedStatus({ commit }, { frame_key, selected }) {
    commit("setWarframeSelectStatus", { frame_key, selected });
  },
  toggleWarframe({ commit }, frame_key) {
    commit("toggleWarframe", frame_key);
  },
  selectByRole({ commit }, role) {
    commit("setStateByRole", { role: role, selectedState: true });
  },
  unselectByRole({ commit }, role) {
    commit("setStateByRole", { role: role, selectedState: false });
  },
};

// mutations
const mutations = {
  setWarframeSelectStatus(state, { frame_key, selected }) {
    state.warframes[frame_key].selected = selected;
  },
  toggleWarframe(state, frame_key) {
    state.warframes[frame_key].selected = !state.warframes[frame_key].selected;
  },
  setStateByRole(state, { role, selectedState }) {
    for (let frame_key in state.warframes) {
      if (state.warframes[frame_key].role === role) {
        state.warframes[frame_key].selected = selectedState;
      }
    }
  },
};

export default {
  namespaced: true,
  state,
  getters,
  actions,
  mutations,
};
